<examples>
  <example name="single_transaction_investigation">
    <description>Investigate a single payment transaction</description>
    <context>User provides a transaction ID from a Jira ticket</context>
    <steps>
      <step>1. Identify transaction ID from ticket: 20251228TNGDMYNB010ORM77048250</step>
      <step>2. Run investigation: mybuddy txn 20251228TNGDMYNB010ORM77048250</step>
      <step>3. Review output: Check transaction status, workflow rules, and remediation SQL</step>
      <step>4. Document findings: Update Jira ticket with investigation results</step>
    </steps>
  </example>

  <example name="batch_transaction_processing">
    <description>Process multiple transactions from a Jira CSV attachment</description>
    <context>Ticket has a CSV attachment with multiple failed transactions</context>
    <steps>
      <step>1. Download CSV: python .roo/skills/buddy-oncall-assistant/scripts/download_jira_attachment.py TS-1234 --filename transactions.csv</step>
      <step>2. Extract transaction IDs: awk -F',' 'NR>1 {print $1}' transactions.csv > txn_ids.txt</step>
      <step>3. Clean and deduplicate: sort -u txn_ids.txt | grep -v '^$' | sed 's/\r$//' > clean_ids.txt</step>
      <step>4. Process batch: mybuddy txn clean_ids.txt > results.log</step>
      <step>5. Review results: Check consolidated output for all transactions</step>
      <step>6. Update ticket: Document findings and resolution steps in Jira</step>
    </steps>
  </example>

  <example name="rpp_workflow_resume">
    <description>Resume a stuck RPP adapter workflow (mybuddy only)</description>
    <context>RPP transaction is stuck and needs manual intervention</context>
    <steps>
      <step>1. Identify E2E ID: 20251228GXSPMY202512281234567890ABCDEF</step>
      <step>2. Run resume: mybuddy rpp resume 20251228GXSPMY202512281234567890ABCDEF</step>
      <step>3. Review deploy SQL: Check the generated deployment SQL</step>
      <step>4. Review rollback SQL: Save rollback SQL for documentation</step>
      <step>5. Apply SQL: Execute deploy SQL in appropriate environment</step>
      <step>6. Update ticket: Document RPP recovery steps in Jira</step>
    </steps>
  </example>

  <example name="eco_transaction_publish">
    <description>Publish an Eco/PartnerPay transaction</description>
    <context>Eco transaction needs to be published to PartnerPay engine</context>
    <steps>
      <step>1. Identify Eco transaction ID: fd230a01dcd04282851b7b9dd6260c93</step>
      <step>2. Run ecotxn: mybuddy ecotxn fd230a01dcd04282851b7b9dd6260c93</step>
      <step>3. Review output: Check transaction status and workflow details</step>
      <step>4. Verify publish: Confirm transaction was published successfully</step>
      <step>5. Update ticket: Document Eco publish results in Jira</step>
    </steps>
  </example>

  <example name="dml_ticket_creation">
    <description>Create a DML ticket for production database change (mybuddy only)</description>
    <context>Production database change requires formal DML ticket process</context>
    <steps>
      <step>1. Identify service: payment_engine</step>
      <step>2. Prepare update SQL: UPDATE transactions SET status='completed' WHERE id IN ('tx1', 'tx2')</step>
      <step>3. Prepare rollback SQL: UPDATE transactions SET status='pending' WHERE id IN ('tx1', 'tx2')</step>
      <step>4. Create DML ticket: mybuddy doorman create-dml --service payment_engine --original "UPDATE transactions SET status='completed' WHERE id IN ('tx1', 'tx2')" --rollback "UPDATE transactions SET status='pending' WHERE id IN ('tx1', 'tx2')" --note "Fix stuck transactions - Reference: TS-1234"</step>
      <step>5. Verify ticket: Check that DML ticket was created with correct details</step>
      <step>6. Reference in original ticket: Link DML ticket number in original Jira ticket</step>
    </steps>
  </example>

  <example name="jira_ticket_resolution">
    <description>Complete end-to-end Jira ticket resolution</description>
    <context>User says "Resolve TS-1234"</context>
    <steps>
      <step>1. View ticket details: mybuddy jira view TS-1234</step>
      <step>2. Download attachments: Use interactive picker to download CSV</step>
      <step>3. Extract transaction IDs: Copy IDs from description or extract from CSV</step>
      <step>4. Investigate transactions: Run mybuddy txn for each ID or batch process</step>
      <step>5. Review remediation: Check generated SQL against SOP case type</step>
      <step>6. Apply fixes: Execute SQL or follow remediation steps</step>
      <step>7. Update ticket: Document findings, SQL used, and resolution status</step>
      <step>8. Close ticket: Mark ticket as resolved in Jira</step>
    </steps>
  </example>

  <example name="singapore_transaction_investigation">
    <description>Investigate transaction in Singapore environment</description>
    <context>SG ticket with transaction ID</context>
    <steps>
      <step>1. Identify transaction ID: 9392fb12b6c64db18e779ae60bdf4307</step>
      <step>2. Run investigation: sgbuddy txn 9392fb12b6c64db18e779ae60bdf4307</step>
      <step>3. Review output: Check transaction status and remediation SQL</step>
      <step>4. Document findings: Update TSE ticket with investigation results</step>
    </steps>
  </example>
</examples>
